<html> 
 <head> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="Discover how to send a message at a specific date and time." name="seoDescription" /> 
  <meta content="2018-07-23T06:02:22.848-0400" name="cq:lastReplicated" /> 
  <meta content="2018-07-30T04:53:53.899-0400" name="locHandOffDate" /> 
  <meta content="2018-07-23T06:02:22.803-0400" name="topicBrowsingSortDate" /> 
  <meta content="2018-03-15T09:02:33.444-0400" name="jcr:created" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="Computing the sending date" name="jcr:description" /> 
  <meta content="locales:fr;locales:de;locales:ja" name="locLangTag" /> 
  <meta content="https://helpx.adobe.com/campaign/standard/sending/using/computing-the-sending-date.html" name="publishExternalURL" /> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="2018-07-23T06:02:22.803-0400" name="firstPublishExternalDate" /> 
  <meta content="sauviat@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="Computing the sending date" name="navTitle" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="2018-07-23T06:02:22.803-0400" name="lastPublishExternalDate" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="200a3f08-a74c-461a-9d69-32500fce7920" name="jcr:uuid" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="2018-07-23T06:02:22.803-0400" name="publishExternalDate" /> 
  <meta content="sauviat" name="cq:lastReplicatedBy" /> 
  <meta content="products:SG_CAMPAIGN/STANDARD" name="primaryProductTag" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="audience:sending" name="primaryAudienceTag" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="6b4cf276-c8c0-4b91-99a8-557fad95a620" name="jcr:predecessors" /> 
  <meta content="products:SG_CAMPAIGN/STANDARD;audience:sending;content_type:reference;topic_tags:sheduling-messages" name="cq:tags" /> 
  <meta content="Computing the sending date" name="jcr:title" /> 
  <meta content="sauviat" name="contentOwner" /> 
  <meta content="2018-07-30T04:53:53.899-0400" name="cq:lastModified" /> 
 </head> 
 <body> 
  <p>You can define a formula to send the message to each recipient at a specific date and time.</p> 
  <h2>Customizing date formula</h2> 
  <p>For example, you may use send time optimization during the ramp-up process.</p> 
  <p>When emails are sent using a new platform, Internet service providers (ISPs) are suspicious of IP addresses that are not recognized. If large volumes of emails are suddenly sent, the ISPs often mark them as spam.</p> 
  <p>To avoid being marked as spam, you can progressively increase the volume sent by distributing large volumes of emails over different times. This should ensure smooth development of the start-up phase and enable you to reduce the overall rate of invalid addresses.</p> 
  <p>For example, you can segment your target audience randomly to send your delivery in five batches. You will send a first batch representing 10% of your target audience on June 1st at 10:00 AM, a second batch 24 hours later with 15% of the audience, and so on.</p> 
  <p>You can schedule this using a workflow.</p> 
  <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_workflow1.png" title="" /> 
  <ol> 
   <li><p>Access the marketing activity list and create a new workflow. See <a href="../../automating/using/building-a-workflow.md#creating-a-workflow">Creating a workflow</a>.</p> </li> 
   <li><p>Drag and drop a <strong>Query</strong> activity into your workflow and open it. See the <a href="../../automating/using/query.md">Query</a> section.</p> </li> 
   <li><p>Select an audience, for example all your Gold customers and click <strong>Confirm</strong> to save the query.</p> </li> 
   <li><p>Drag and drop a <strong>Segmentation</strong> activity into your workflow and open it. See the <a href="../../automating/using/segmentation.md">Segmentation</a> section.</p> </li> 
   <li><p>Define five segments. For each segment:</p> 
    <ul> 
     <li><p>Fill in the <strong>Segment code</strong> field: manually enter the desired date and time for sending the message.</p> <p>For example, you want to send the first batch on June 1st at 10:00 AM GMT+1. Use the following format: <strong>YYYY-MM-DD hh:mm:ss+tz</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_segment_configuration.png" title="" /><p>To send the next batch the day after, enter <strong>2017-06-02 10:00:00+01</strong> for the second segment.</p> <p>For the remaining segments, define the next batches as follows:</p> 
      <ul> 
       <li><p><strong>2017-06-03 10:00:00+01</strong></p> </li> 
       <li><p><strong>2017-06-04 10:00:00+01</strong></p> </li> 
       <li><p><strong>2017-06-05 10:00:00+01</strong></p> </li> 
      </ul></li> 
     <li><p>Make sure you select the <strong>Limit the population of this segment</strong> option.</p> <p>In the <strong>Limitation</strong> tab, select <strong>Random sampling</strong> and enter the desired percentage for each segment: 10 for the first batch, 15 for the second, and so on.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_segment_limitation.png" title="" /></li> 
    </ul></li> 
   <li><p>Once all segments are defined, select <strong>Generate all segments in the same transition</strong> and click <strong>Confirm</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_segment_dates.png" title="" /></li> 
   <li><p>Drag and drop an <strong>Email delivery</strong> activity into your workflow and open it. See the <a href="../../automating/using/email-delivery.md">Email delivery</a> section.</p> </li> 
   <li><p>Click the <strong>Schedule</strong> section in the email dashboard and select <strong>Messages to be sent automatically on the date specified below</strong>.</p> </li> 
   <li><p>In the <strong>Start sending from</strong> field, define a contact date.</p> </li> 
   <li><p>From the send time optimization drop-down menu, choose <strong>Send at a custom date defined by a formula</strong>.</p> </li> 
   <li><p>Click the <strong>Edit an expression</strong> button of the <strong>Custom date formula</strong> field.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_define.png" title="" /></li> 
   <li><p>Create the following expression using the <strong>ToDateTime</strong> function and the <strong>Segment code</strong> field. You can also direclty type in the expression but make sure to use correct syntax and spelling.</p> 
    <codeblock gutter="true" class="syntax html">
      ToDateTime([targetData/@segmentCode]) 
    </codeblock><p>The <strong>ToDateTime</strong> function transforms the segment code from a text string to a date and time value.</p> <p>Confirm the expression to return to the previous screen.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_define_segment.png" title="" /><p>In the <strong>Schedule</strong> window, the custom date formula is displayed as follows:</p> 
    <codeblock gutter="true" class="syntax html">
      ToDateTime([targetData/@segmentCode]) 
    </codeblock><img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_custom_formula.png" title="" /></li> 
   <li><p>Confirm the schedule, save your delivery and execute the workflow.</p> </li> 
  </ol> 
  <p>The delivery will be progressively sent to all targeted recipients over five days.</p> 
  <note> 
   <p> Make sure that all dates are in the future when confirming the send. Otherwise the message will be sent as soon as the send is confirmed. </p> 
  </note> 
  <h2>Using an expression</h2> 
  <p>Send time optimization is also useful for campaigns involving a call center. You can ensure that all messages are not received at the same time. This enables your organization to process the number of calls according to its capacity.</p> 
  <p>For example, you want to send an email inviting your customers to contact a call center in order to get a promotional offer. To avoid overwhelming the call center, you decide to segment your target audience randomly to send your email in four batches.</p> 
  <p>You can schedule this using a workflow.</p> 
  <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_workflow2.png" title="" /> 
  <ol> 
   <li><p>Access the marketing activity list and create a new workflow. See <a href="../../automating/using/building-a-workflow.md#creating-a-workflow">Creating a workflow</a>.</p> </li> 
   <li><p>Drag and drop a <strong>Query</strong> activity into your workflow and open it. See the <a href="../../automating/using/query.md">Query</a> section.</p> </li> 
   <li><p>Select an audience, for example over 35 profiles and click <strong>Confirm</strong> to save the query.</p> </li> 
   <li><p>Drag and drop a <strong>Segmentation</strong> activity into your workflow and open it. See the <a href="../../automating/using/segmentation.md">Segmentation</a> section.</p> </li> 
   <li><p>Define four segments. For each segment:</p> 
    <ul> 
     <li><p>Define the segment codes as follows:</p> 
      <ul> 
       <li><p>8:00 AM - 10:00 AM: <strong>0</strong>. The message will be sent to the first quarter of the target population at 8:00 AM (contact date).</p> </li> 
       <li><p>10:00 AM - 12:00 PM: <strong>2</strong>. The message will be sent to the second quarter of the target population at 10:00 AM (contact date + 2 hours).</p> </li> 
       <li><p>2:00 PM - 4:00 PM: <strong>6</strong>. The call center being closed between 12:00 PM and 2:00 PM, the message will be sent to the third quarter of the target population at 2:00 PM (contact date + 6 hours).</p> </li> 
       <li><p>4:00 PM - 6:00 PM: <strong>8</strong>. The message will be sent to the last quarter of the target population at 4:00 PM (contact date + 8 hours).</p> </li> 
      </ul> 
      <note> 
       <p> The contact date will be defined in the Email delivery activity later in the workflow. </p> 
      </note></li> 
     <li><p>Make sure you select the <strong>Limit the population of this segment</strong> option.</p> </li> 
     <li><p>In the <strong>Limitation</strong> tab, select <strong>Random sampling</strong> and enter the desired percentage for each segment: <strong>25</strong>.</p> </li> 
    </ul></li> 
   <li><p>Once all segments are defined, select <strong>Generate all segments in the same transition</strong> and click <strong>Confirm</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_segment.png" title="" /></li> 
   <li><p>Drag and drop an <strong>Email delivery</strong> activity into your workflow and open it. See the <a href="../../automating/using/email-delivery.md">Email delivery</a> section.</p> </li> 
   <li><p>Click the <strong>Schedule</strong> section in the email dashboard.</p> </li> 
   <li><p>Select <strong>Messages to be sent automatically on the date specified below</strong>.</p> </li> 
   <li><p>In the <strong>Start sending from</strong> field, define a contact date.</p> <p>In this example, select May 25th at 8:00 AM.</p> </li> 
   <li><p>From the send time optimization drop-down menu, choose <strong>Send at a custom date defined by a formula</strong> and click the <strong>Edit an expression</strong> button.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_expression.png" title="" /></li> 
   <li><p>In the <strong>Expression editor</strong>, set the date and the segment codes to compute the data for each customer.</p> <p>In the list of functions, select <strong>AddHours</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_expression_addhours.png" title="" /><p>In the available fields, select <strong>Current delivery</strong> &gt; <strong>Delivery scheduling</strong> &gt; <strong>Contact date</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_expression_contact_date.png" title="" /><p>This enables you to retrieve the date and time specified in the <strong>Start sending from</strong> field.</p> <p>In the list of functions, select <strong>ToInteger</strong>. In the available fields, select <strong>Additional data</strong> &gt; <strong>Segment code</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/send-time_opt_formula_expression_segment_code.png" title="" /><p>This enables you to retrieve the numbers that you specified in the segment codes.</p> <p>You should get the following formula:</p> 
    <codeblock gutter="true" class="syntax html">
      AddHours([currentDelivery/scheduling/@contactDate],&amp;nbsp;ToInteger([targetData/@segmentCode])) 
    </codeblock></li> 
   <li><p>Confirm to save your expression. Confirm the schedule, save your delivery and execute the workflow.</p> </li> 
  </ol> 
  <ul> 
   <li><p>The first segment will receive the message on the contact date (May 25th at 8:00 AM).</p> </li> 
   <li><p>The second segment will receive the message two hours later (May 25th at 10:00 AM).</p> </li> 
   <li><p>The third segment will receive the message six hours later (May 25th at 2:00 PM).</p> </li> 
   <li><p>The fourth segment will receive the message eight hours later (May 25th at 4:00 PM).</p> </li> 
  </ul> 
 </body> 
</html>