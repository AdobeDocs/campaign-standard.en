<html> 
 <head> 
  <meta content="" name="jcr:baseVersion" /> 
  <meta content="true" name="jcr:isCheckedOut" /> 
  <meta content="help/components/pages/article-3" name="sling:resourceType" /> 
  <meta content="" name="jcr:primaryType" /> 
  <meta content="2018-09-10T07:28:55.068-0400" name="cq:lastModified" /> 
  <meta content="/apps/help/templates/article-3" name="cq:template" /> 
  <meta content="admin" name="jcr:createdBy" /> 
  <meta content="false" name="isReadyForLocalization" /> 
  <meta content="mix:versionable" name="jcr:mixinTypes" /> 
  <meta content="sauviat@adobe.com" name="lr_lastReplicatedBy" /> 
  <meta content="2018-09-07T15:08:52.363-0400" name="lastPublishExternalDate" /> 
  <meta content="95a5c92a-67f7-45e3-9796-7f3ee2cc4cba" name="jcr:predecessors" /> 
  <meta content="/etc/designs/help" name="cq:designPath" /> 
  <meta content="Advanced expression editing" name="jcr:title" /> 
  <meta content="audience:automating" name="primaryAudienceTag" /> 
  <meta content="Advanced expression editing" name="navTitle" /> 
  <meta content="The query edition wizard allows you to define advanced expressions." name="seoDescription" /> 
  <meta content="light" name="heroGradient" /> 
  <meta content="Advanced expression editing" name="jcr:description" /> 
  <meta content="products:SG_CAMPAIGN/STANDARD" name="primaryProductTag" /> 
  <meta content="sauviat" name="cq:lastReplicatedBy" /> 
  <meta content="locales:fr;locales:de;locales:ja" name="locLangTag" /> 
  <meta content="2018-09-07T15:08:52.363-0400" name="firstPublishExternalDate" /> 
  <meta content="2018-03-15T09:02:26.316-0400" name="jcr:created" /> 
  <meta content="sauviat" name="contentOwner" /> 
  <meta content="" name="jcr:versionHistory" /> 
  <meta content="Activate" name="cq:lastReplicationAction" /> 
  <meta content="2018-09-10T07:28:55.067-0400" name="locHandOffDate" /> 
  <meta content="2018-09-07T15:08:52.687-0400" name="cq:lastReplicated" /> 
  <meta content="4827f587-dd75-4ba9-bcd8-18677aac111e" name="jcr:uuid" /> 
  <meta content="products:SG_CAMPAIGN/STANDARD;audience:automating;content_type:reference;topic_tags:filtering-data" name="cq:tags" /> 
  <meta content="https://helpx.adobe.com/campaign/standard/automating/using/advanced-expression-editing.html" name="publishExternalURL" /> 
  <meta content="en_us" name="jcr:language" /> 
  <meta content="2018-09-07T15:08:52.363-0400" name="topicBrowsingSortDate" /> 
  <meta content="2018-09-07T15:08:52.363-0400" name="publishExternalDate" /> 
 </head> 
 <body> 
  <h2>About advanced expression editing</h2> 
  <p>Editing an expression involves manually entering conditions to form a rule.</p> 
  <p>This mode allows you to use advanced functions. These functions let you manipulate the values used to carry out specific queries such as manipulating dates, strings, numerical fields, sorting, etc.</p> 
  <p>You can edit expressions in order to:</p> 
  <ul> 
   <li><p>Define a query, via the <strong>Advanced mode</strong> option which is available when a rule is added.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/expression_editor_2.png" title="" /></li> 
   <li><p>Edit an expression in a workflow. For example, to add additional data to an activity.</p> </li> 
   <li><p>Edit a visibility condition to define how a block in the HTML content editor is displayed. In this case, the expression is edited in JavaScript format and does not offer the use of advanced functions as standard.</p> </li> 
  </ul> 
  <h2>Edit an expression</h2> 
  <p>Advanced expression edition lets you manually define an expression that corresponds specifically to your needs.</p> 
  <p>Editing expressions can be used in the Audience window while creating an email or in a Query activity while creating a workflow.</p> 
  <ol> 
   <li><p>Access the expression editing window via one of the methods detailed in the <a href="../../automating/using/advanced-expression-editing.md#about-advanced-expression-editing" target="_blank">About advanced expression editing</a> section. It involves the following elements:</p> 
    <ul> 
     <li><p>An input field in which the expression is defined.</p> </li> 
     <li><p>The list of available fields that can be used in the expression and correspond to the targeting dimension of the query (see <a href="../../automating/using/query.md#targeting-dimensions-and-resources" target="_blank">Targeting dimensions and resources</a>).</p> </li> 
     <li><p>The list of available functions, sorted by category.</p> </li> 
    </ul><img alt="" captionBottom="" imageRotate="0" src="assets/expression_editor_1.png" title="" /></li> 
   <li><p>Edit the expression by entering an expression directly in the corresponding field or by using the lists of available fields and functions.</p> <p>Double clicking a field or an expression adds it to the expression in which the cursor is placed.</p> </li> 
   <li><p>Give your rule a specific name if needed. The name entered will appear as the rule name in the query editor workspace.</p> </li> 
  </ol> 
  <p>Editing an expression lets you personalize the Audiences expression to target your population as needed.</p> 
  <p><strong>Related Topics:</strong></p> 
  <ul> 
   <li><p> <a href="../../automating/using/advanced-expression-editing.md#expression-syntax" target="_blank">Expression Syntax</a></p> </li> 
   <li><p> <a href="../../automating/using/list-of-functions.md" target="_blank">List of functions</a></p> </li> 
  </ul> 
  <h2>Expression Syntax</h2> 
  <h3>Standard syntax</h3> 
  <p>The standard expressions are made up of one or several conditions that respect the following syntax elements:</p> 
  <ul> 
   <li><p>Each condition takes the form of <strong>&amp;lt;value1&amp;gt; &amp;lt;comparison operator&amp;gt; &amp;lt;value2&amp;gt;</strong> whereby:</p> 
    <ul> 
     <li><p><strong>&amp;lt;value1&amp;gt;</strong> is a field or a function. For example <strong>@created</strong> for the date a profile was created or <strong>Year(@created)</strong> for the year a profile was created.</p> </li> 
     <li><p><strong>&amp;lt;comparison operator&amp;gt;</strong> is one of the operators listed in the <a href="../../automating/using/advanced-expression-editing.md#comparison-operators" target="_blank">Comparison operators</a> section. This operator defines the comparison method between <strong>&amp;lt;value1&amp;gt;</strong> and <strong>&amp;lt;value2&amp;gt;</strong>.</p> </li> 
     <li><p><strong>&amp;lt;value2&amp;gt;</strong> is a field, a function, or a value inputted manually.</p> </li> 
    </ul> 
    <note> 
     <p> The <strong>&amp;lt;value1&amp;gt;</strong> and <strong>&amp;lt;value2&amp;gt;</strong> type data must be identical. For example, if <strong>&amp;lt;value1&amp;gt;</strong> is a date, then <strong>&amp;lt;value2&amp;gt;</strong> must also be a date. </p> 
    </note></li> 
   <li><p>If you would like to use several conditions, they can be combined using logical operators.</p> 
    <ul> 
     <li><p><strong>AND</strong>: two conditions are intersected.</p> </li> 
     <li><p><strong>OR</strong>: two conditions are combined.</p> </li> 
    </ul></li> 
  </ul> 
  <p>For example:</p> 
  <codeblock gutter="true" class="syntax html">
    Year(@created)&amp;nbsp;=&amp;nbsp;Year(GetDate())&amp;nbsp;AND&amp;nbsp;Month(@created)&amp;nbsp;=&amp;nbsp;Month(GetDate()) 
  </codeblock> 
  <p>In this example, the profiles whose creation date is in the current month and year are targeted.</p> 
  <h3>JavaScript syntax</h3> 
  <p>When defining the visibility conditions of a text type block of the HTML content editor, you must use an expression with JavaScript type syntax.</p> 
  <p>JavaScript expressions are made up of one or multiple conditions, and they use the following syntax elements:</p> 
  <ul> 
   <li><p>Each condition takes the form of <strong>&amp;lt;context&amp;gt; &amp;lt;comparison operator&amp;gt; &amp;lt;value2&amp;gt;</strong> whereby:</p> 
    <ul> 
     <li><p><strong>&amp;lt;context&amp;gt;</strong> is a field or a function that allows you to specify the context. For example <strong>context.profile.@email</strong> for a profile's email address or <strong>context.profile.firstName.length()</strong> for the number of characters of a profile's first name.</p> </li> 
     <li><p><strong>&amp;lt;comparison operator&amp;gt;</strong> is one of the operators listed in the <a href="../../automating/using/advanced-expression-editing.md#comparison-operators" target="_blank">Comparison operators</a> section. This operator defines the comparison method between <strong>&amp;lt;context&amp;gt;</strong> and <strong>&amp;lt;value2&amp;gt;</strong>.</p> </li> 
     <li><p><strong>&amp;lt;value2&amp;gt;</strong> is a field, a function, or a value inputted manually.</p> </li> 
    </ul> 
    <note> 
     <p> The <strong>&amp;lt;context&amp;gt;</strong> and <strong>&amp;lt;value2&amp;gt;</strong> type data must be identical. For example, if <strong>&amp;lt;context&amp;gt;</strong> is a date, then <strong>&amp;lt;value2&amp;gt;</strong> must also be a date. </p> 
    </note></li> 
   <li><p>If you would like to use several conditions, they can be combined using logical operators.</p> 
    <ul> 
     <li><p><strong>&amp;&amp;</strong>: two conditions are intersected.</p> </li> 
     <li><p><strong>||</strong>: two conditions are combined.</p> </li> 
    </ul></li> 
  </ul> 
  <p>For example:</p> 
  <codeblock gutter="true" class="syntax html">
    context.profile.age&amp;nbsp;&amp;gt;&amp;nbsp;21&amp;nbsp;&amp;&amp;&amp;nbsp;context.profile.firstName.length()&amp;nbsp;&amp;gt;&amp;nbsp;0 
  </codeblock> 
  <p>In this example, profiles older than 21 years of age and whose first name has been provided (symbolized by the fact that the <strong>firstName</strong> field contains at least one character).</p> 
  <h2>Comparison operators</h2> 
  <p>For some rules, the query editor lets you chose a value to define your condition.</p> 
  <p>Conditions must be linked to values by using one of the following operators.</p> 
  <table> 
   <thead> 
    <tr> 
     <th> Operator<br /> </th> 
     <th> Standard syntax<br /> </th> 
     <th> JavaScript syntax<br /> </th> 
     <th> Description<br /> </th> 
     <th> Example<br /> </th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td> <strong>Equal to</strong><br /> </td> 
     <td> =<br /> </td> 
     <td> ==<br /> </td> 
     <td> The first value must be completely identical to the second value.<br /> </td> 
     <td> <strong>@lastName = Martin</strong> retrieves profiles whose last name is 'Martin', with only these identical characters.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Greater than</strong><br /> </td> 
     <td> &gt;<br /> </td> 
     <td> &gt;<br /> </td> 
     <td> The first value must categorically be more than the second value.<br /> </td> 
     <td> <strong>@age &gt; 50</strong> retrieves profiles who are older than '50', so '51', '52', etc.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Less than</strong><br /> </td> 
     <td> &lt;<br /> </td> 
     <td> &lt;<br /> </td> 
     <td> The first value must categorically be less than the second value.<br /> </td> 
     <td> <strong>@created &lt; DaysAgo(100)</strong> retrieves all profiles created in the database less than 100 days ago.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Greater than or equal to</strong><br /> </td> 
     <td> &gt;=<br /> </td> 
     <td> &gt;=<br /> </td> 
     <td> The first value must be more than or equal to the second value.<br /> </td> 
     <td> <strong>@age &gt;= 30</strong> retrieves profiles aged 30 years and older.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Less than or equal to</strong><br /> </td> 
     <td> &lt;=<br /> </td> 
     <td> &lt;=<br /> </td> 
     <td> The first value must be less than or equal to the second value.<br /> </td> 
     <td> <strong>@age &lt;= 60</strong> retrieves profiles aged 60 or less.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Different </strong><br /> </td> 
     <td> !=<br /> </td> 
     <td> !=<br /> </td> 
     <td> The first value must be different from the second value.<br /> </td> 
     <td> <strong>@language != English</strong> retrieves profiles that have not been defined as English speaking.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Contains</strong><br /> </td> 
     <td> IN<br /> </td> 
     <td> N/A<br /> </td> 
     <td> The first value must contain the second value.<br /> </td> 
     <td> <strong>@domain IN mail</strong>. Here, all the domain names with the 'mail' value are returned in the result. Consequently, the 'gmail.com' domain name will make up part of the returned results.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Like</strong><br /> </td> 
     <td> LIKE<br /> </td> 
     <td> N/A<br /> </td> 
     <td> <strong>Like</strong> is very similar to the <strong>Contains</strong> operator. It lets you insert a <strong>%</strong> wild card character in the value that is being searched.<br /> </td> 
     <td> <strong>@lastName LIKE Mart%n</strong>. Here, the substitution character <strong>%</strong> serves as a "joker" to find the name "Martin" in the hypothetical case that the spelling is not correct.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Not like</strong><br /> </td> 
     <td> NOT<br /> </td> 
     <td> N/A<br /> </td> 
     <td> Is similar to <strong>Like</strong>. It lets you not recover the entered value. Here too, the entered value must contain the <strong>%</strong> wild card character.<br /> </td> 
     <td> <strong>@lastName NOT Smi%h</strong>. Here, the recipients correspond to the name 'Smi%h' (so Smith, etc.) are not returned as a result.<br /> </td> 
    </tr> 
    <tr> 
     <td> <strong>Is empty</strong><br /> </td> 
     <td> IS NULL<br /> </td> 
     <td> N/A<br /> </td> 
     <td> The first value must correspond to an empty value.<br /> </td> 
     <td> <strong>@mobilePhone IS NULL</strong> retrieves all the profiles whose mobile phone number has not been provided.<br /> </td> 
    </tr> 
   </tbody> 
  </table> 
 </body> 
</html>