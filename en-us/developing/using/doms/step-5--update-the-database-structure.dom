<html>
 <head>
  <meta content="products:SG_CAMPAIGN/STANDARD" name="primaryProductTag" />
  <meta content="admin" name="jcr:createdBy" />
  <meta content="Step 5: Update the database structure" name="jcr:title" />
  <meta content="2018-07-23T05:59:11.768-0400" name="firstPublishExternalDate" />
  <meta content="true" name="jcr:isCheckedOut" />
  <meta content="/apps/help/templates/article-3" name="cq:template" />
  <meta content="false" name="isReadyForLocalization" />
  <meta content="2018-07-26T02:53:32.666-0400" name="locHandOffDate" />
  <meta content="2018-07-23T05:59:11.768-0400" name="lastPublishExternalDate" />
  <meta content="Step 5: Update the database structure" name="jcr:description" />
  <meta content="2018-07-26T02:53:32.667-0400" name="cq:lastModified" />
  <meta content="https://helpx.adobe.com/campaign/standard/developing/using/step-5--update-the-database-structure.html" name="publishExternalURL" />
  <meta content="2018-07-23T05:59:11.768-0400" name="publishExternalDate" />
  <meta content="" name="jcr:primaryType" />
  <meta content="c6af9c90-06ba-4127-ba9a-2dc59c97ea78" name="jcr:uuid" />
  <meta content="2018-03-15T09:03:02.614-0400" name="jcr:created" />
  <meta content="sauviat" name="contentOwner" />
  <meta content="2018-07-23T05:59:11.815-0400" name="cq:lastReplicated" />
  <meta content="audience:developing" name="primaryAudienceTag" />
  <meta content="locales:fr;locales:de;locales:ja" name="locLangTag" />
  <meta content="en_us" name="jcr:language" />
  <meta content="Activate" name="cq:lastReplicationAction" />
  <meta content="Step 5: Update the database structure" name="navTitle" />
  <meta content="" name="jcr:baseVersion" />
  <meta content="5d3a8414-47a3-41e0-85ef-d40d512039a6" name="jcr:predecessors" />
  <meta content="sauviat@adobe.com" name="lr_lastReplicatedBy" />
  <meta content="mix:versionable" name="jcr:mixinTypes" />
  <meta content="sauviat" name="cq:lastReplicatedBy" />
  <meta content="Discover how to update the Adobe Campaign database." name="seoDescription" />
  <meta content="products:SG_CAMPAIGN/STANDARD;audience:developing;content_type:reference;topic_tags:adding-or-extending-a-resource" name="cq:tags" />
  <meta content="/etc/designs/help" name="cq:designPath" />
  <meta content="2018-07-23T05:59:11.768-0400" name="topicBrowsingSortDate" />
  <meta content="light" name="heroGradient" />
  <meta content="" name="jcr:versionHistory" />
  <meta content="help/components/pages/article-3" name="sling:resourceType" />
 </head>
 <body>
  <p>To make your modifications to the data model effective and to be able to use them, the database structure needs to be updated.</p> 
  <note>
   <p> Custom resources are automatically refreshed during automatic updates performed by Adobe. </p> 
  </note>
  <h2>Publishing a custom resource</h2>
  <p>To apply the changes carried out on the resources, you must perform a database update.</p> 
  <note>
   <p> If a field of a custom resource used on an event is modified or deleted, the corresponding event will automatically be unpublished. See <a href="../../administration/using/configuring-transactional-messaging.md">Configuring Transactional messaging</a>. </p> 
  </note>
  <ol>
   <li><p>From the advanced menu, via the Adobe Campaign logo, select <strong>Administration</strong> &gt; <strong>Development</strong>, then <strong>Publication</strong>.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/schema_extension_12.png" title="" /></li>
   <li><p>By default, the option <strong>Determine modifications since the last publication</strong> is checked, which means that only the changes carried out since the last update will be applied.</p> 
    <note>
     <p> The <strong>Repair database structure</strong> reestablishes a correct configuration if the publication failed before completing. Any modification that was carried out directly in the database and not using custom resources will be deleted. </p> 
    </note></li>
   <li><p>Click the <strong>Prepare publication</strong> button to start the analysis.</p> <img alt="" captionBottom="" imageRotate="0" src="assets/schema_extension_13.png" title="" /></li>
   <li><p>Once the publication has been carried out, click the <strong>Publish</strong> button to apply your new configurations.</p> </li>
   <li><p>Once published, the <strong>Summary</strong> pane of each resource indicates that the status is now <strong>Published</strong> and specifies the date of the last publication.</p> 
    <note>
     <p> If you make new changes to a resource, you must repeat this operation for the changes to be applied. </p> 
    </note><p>If resources have the <strong>Pending re-draft</strong> status before publishing, then an additional message will appear inviting you to check your actions because publishing will result in definitive changes (deleting columns, tables...). To help you carry out this last change, an <strong>SQL Script</strong> tab is available. It provides the SQL command that will be executed during the publication. </p> <img alt="" captionBottom="" imageRotate="0" src="assets/schema_extension_scriptSQL.png" title="" />
    <note>
     <p> You can stop the Re-draft process by clicking the <strong>Cancel re-draft</strong> button. This action will revert the resource's status back to its original one. </p> 
    </note></li>
  </ol>
  <h2>Publishing a resource with API extension</h2>
  <p>When you extend the custom resources <strong>Profiles</strong> or <strong>Services</strong>, you can perform an update of the Profiles and Services API to integrate the fields declared in the custom resources extension.</p> 
  <p>When you define a custom resource and you create a link between the resources Profiles or Services and the custom resource, you can perform an update to include the new resource in the API.</p> 
  <p>This option is available in the publication screen.</p> 
  <img alt="" captionBottom="" imageRotate="0" src="assets/extendPandSAPI.png" title="" />
  <note>
   <p> By default, the custom resource is integrated, but, for a specific behavior, if you don't want to publish this resource, you can select the option <strong>Hide this resource from APIs</strong> available in the <strong>Resource Properties</strong>. </p> 
  </note>
  <p>After the <strong>Prepare Publication</strong> step, Adobe Campaign displays the delta between the current version of the API and the future version after the publication in the tab <strong>Profiles &amp; Services API Preview</strong>. If you extend the API for the first time, the delta compares the out-of-the-box custom resource definition with your extension.</p> 
  <p>The information displayed in the tab is divided into three sections: added, deleted and modified elements.</p> 
  <img alt="" captionBottom="" imageRotate="0" src="assets/extendPandSAPI_diff.png" title="" />
  <p>The analysis of the delta is a mandatory step as the publication step will modify the API behavior and will most likely affect the surrounding development in a domino effect.</p> 
  <note>
   <p> This publication updates the <strong>profilesAndServicesExt</strong> API. The <strong>profilesAndSedrvices</strong> API is not updated. </p> 
  </note>
  <p>For more information on the Adobe Campaign API, consult the dedicated Adobe Campaign documentation on <a href="https://docs.campaign.adobe.com/doc/standard/en/adobeio.html">Adobe IO</a>.</p> 
 </body>
</html>